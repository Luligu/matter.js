{
  "version": 3,
  "sources": ["../../../src/running/execute.ts"],
  "sourcesContent": ["/**\n * @license\n * Copyright 2022-2023 Project CHIP Authors\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { spawn, SpawnOptions } from \"child_process\";\nimport { platform } from \"os\";\n\nimport colors from \"ansi-colors\";\n\nexport async function execute(bin: string, argv: string[]) {\n    return new Promise<void>((resolve, reject) => {\n        let finished = false;\n\n        const options: SpawnOptions = {\n            stdio: \"inherit\",\n        };\n        if (platform() === \"win32\") {\n            options.shell = true;\n        }\n\n        const proc = spawn(bin, argv, options);\n\n        proc.on(\"error\", e => {\n            finished = true;\n            reject(e);\n        });\n\n        proc.on(\"close\", code => {\n            if (finished) {\n                return;\n            }\n            finished = true;\n\n            if (code === 0) {\n                resolve();\n            } else {\n                reject(`Process ${bin} exited with code ${code}`);\n            }\n        });\n    });\n}\n\nexport async function executeNode(script: string, argv: string[]) {\n    argv = [\"--enable-source-maps\", script, ...argv];\n    if (process.env.MATTER_RUN_ECHO) {\n        const command = colors.whiteBright(`node ${argv.join(\" \")}`);\n        process.stdout.write(`${colors.greenBright(\"Matter execute:\")} ${command}\\n`);\n    }\n    return execute(\"node\", argv);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,2BAAoC;AACpC,gBAAyB;AAEzB,yBAAmB;AATnB;AAAA;AAAA;AAAA;AAAA;AAWA,eAAsB,QAAQ,KAAa,MAAgB;AACvD,SAAO,IAAI,QAAc,CAAC,SAAS,WAAW;AAC1C,QAAI,WAAW;AAEf,UAAM,UAAwB;AAAA,MAC1B,OAAO;AAAA,IACX;AACA,YAAI,oBAAS,MAAM,SAAS;AACxB,cAAQ,QAAQ;AAAA,IACpB;AAEA,UAAM,WAAO,4BAAM,KAAK,MAAM,OAAO;AAErC,SAAK,GAAG,SAAS,OAAK;AAClB,iBAAW;AACX,aAAO,CAAC;AAAA,IACZ,CAAC;AAED,SAAK,GAAG,SAAS,UAAQ;AACrB,UAAI,UAAU;AACV;AAAA,MACJ;AACA,iBAAW;AAEX,UAAI,SAAS,GAAG;AACZ,gBAAQ;AAAA,MACZ,OAAO;AACH,eAAO,WAAW,GAAG,qBAAqB,IAAI,EAAE;AAAA,MACpD;AAAA,IACJ,CAAC;AAAA,EACL,CAAC;AACL;AAEA,eAAsB,YAAY,QAAgB,MAAgB;AAC9D,SAAO,CAAC,wBAAwB,QAAQ,GAAG,IAAI;AAC/C,MAAI,QAAQ,IAAI,iBAAiB;AAC7B,UAAM,UAAU,mBAAAA,QAAO,YAAY,QAAQ,KAAK,KAAK,GAAG,CAAC,EAAE;AAC3D,YAAQ,OAAO,MAAM,GAAG,mBAAAA,QAAO,YAAY,iBAAiB,CAAC,IAAI,OAAO;AAAA,CAAI;AAAA,EAChF;AACA,SAAO,QAAQ,QAAQ,IAAI;AAC/B;",
  "names": ["colors"]
}
